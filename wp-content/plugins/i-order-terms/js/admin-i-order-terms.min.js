jQuery(document).ready(function(a){"use strict";var b=a("table.wp-list-table > tbody");b.sortable({items:"> tr:not(.inline-edit-row)",axis:"y",containment:"table.wp-list-table",cursor:"move",distance:5,forceHelperSize:!0,forcePlaceholderSize:!0,helper:"clone",opacity:.8,scrollSensitivity:40,update:function(c,d){function e(c){var d;return c.length&&(d=parseInt(c.find(".check-column input").val(),10),d||(d=parseInt(c.attr("id").replace("tag-",""),10)),!a.isNumeric(d))?void b.sortable("cancel"):d}var f=a('input[name="taxonomy"]');if(!f.length)return void b.sortable("cancel");var g,h,i=d.item,j=i.prev(),k=i.next(),l=i.find(".check-column"),m=i.find(".check-column input"),n=f[0].value,o=e(i),p=e(j),q=e(k);if(j.length&&void 0!==p&&(g=parseInt(j.find(".parent").text(),10)),k.length&&void 0!==q&&(h=parseInt(k.find(".parent").text(),10)),void 0===p&&void 0===q||g===o||h===o)return void b.sortable("cancel");b.sortable("disable"),m.length?m.hide().after('<span class="spinner" style="display:block;"></span>'):l.prepend('<span class="spinner" style="display:block;"></span>');var r=void 0===q&&h===p,s={action:"i-order-terms",term_id:o,term_prev_id:p,term_next_id:q,taxonomy:n,force_reload:r};a.post(ajaxurl,s,function(c){if("ok"===c.status){if(c.force_reload)return void window.location.reload();a("#ajax-response").empty()}else a("#ajax-response").empty().append('<div class="error"><p>'+c.message+"</p></div>"),b.sortable("cancel"),console.error(c.message);m.length?m.show().siblings(".spinner").remove():l.children(".spinner").remove(),b.sortable("enable")},"json"),a("table.wp-list-table > tbody > tr").each(function(b,c){b%2===0?a(c).addClass("alternate"):a(c).removeClass("alternate")})}}),a(document).ajaxSuccess(function(a,c,d){d.data&&-1!==d.data.indexOf("action=add-tag")&&c.responseText&&-1===c.responseText.indexOf("wp_error")&&b.sortable("refresh")})});